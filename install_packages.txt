#!/bin/bash

# Script to install packages using nala on Linux Mint

# List of packages to install (duplicates removed)
PACKAGES=(
# Normal use-case
    #"htop"
    #"neofetch"
    #"bpytop"
    "clang"
    #"cargo"
    "libc6-i386"
    "libc6-x32"
    "libu2f-udev"
    "samba-common-bin"
    "exfat-fuse"
    "default-jdk"
    "curl"
    "wget"
    "unrar"
    #"linux-headers-$(uname -r)"
    "linux-headers-generic"
    "git"
    #"gstreamer1.0-vaapi"
    "unzip"
    "ntfs-3g"
    "p7zip"
    "gcc"
    "make"
    "bzip2"
    "tar"
    #"vlc"
    "xclip"
    "stacer"
    "bleachbit"
# Nvim use-case
    "npm"
    "fzf"
    "ripgrep"
    "wordnet"
    "nodejs"
    "gzip"
    "pip"
    "openjdk-21-jdk"
    "python3-venv"
    #"imagemagick"
)

# Check if nala is installed
if ! command -v nala &> /dev/null; then
    echo "Error: nala is not installed. Please install it first with:"
    echo "sudo apt update && sudo apt install nala -y"
    exit 1
fi

# Check if script is run with sudo privileges
if [ "$EUID" -ne 0 ]; then
    echo "Error: This script must be run as root (use sudo)."
    exit 1
fi

# Update package cache
echo "Updating package cache with nala..."
nala update
if [ $? -ne 0 ]; then
    echo "Error: Failed to update package cache."
    exit 1
fi

# Install packages
echo "Installing packages: ${PACKAGES[*]}"
nala install "${PACKAGES[@]}"
if [ $? -ne 0 ]; then
    echo "Error: Failed to install one or more packages."
    exit 1
fi

# Clean up
echo "Cleaning up unnecessary packages..."
nala autopurge -y
if [ $? -ne 0 ]; then
    echo "Warning: Failed to clean up unnecessary packages."
fi

echo "Package installation completed successfully!"
exit 0
